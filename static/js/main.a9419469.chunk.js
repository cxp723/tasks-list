(this["webpackJsonptasks-list"]=this["webpackJsonptasks-list"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n(0),a=n.n(c),i=n(7),r=n.n(i),o=(n(35),n(3)),u=n(4),l=(n(36),n(10)),d=n.n(l);var j=function(e){var t=e.task,n=t.id,a=t.title,i=(t.date,t.completed),r=Object(c.useState)(!1),l=Object(u.a)(r,2),j=l[0],b=l[1],p=Object(c.useState)(a),h=Object(u.a)(p,2),f=h[0],k=h[1],m=function(){f.trim()?(e.editTask(Object(o.a)(Object(o.a)({},e.task),{},{title:f})),b(!1)):e.setMessage({type:"Warning",title:"You can not add empty task",isSet:!0})};return Object(s.jsx)("li",{className:"task",children:j?Object(s.jsxs)("div",{className:"editMode",children:[Object(s.jsx)("input",{type:"text",value:f,onChange:function(e){k(e.currentTarget.value)},onKeyDown:function(e){switch(e.keyCode){case 13:m();break;case 27:b(!1)}},ref:function(e){return e&&e.focus()},className:"editTask"}),Object(s.jsx)("button",{className:"button green",onClick:m,children:"Edit"})]}):Object(s.jsxs)(c.Fragment,{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{className:"isDone",type:"checkbox",checked:i,onChange:function(){e.changeCompleteness(e.task)}}),Object(s.jsx)("span",{className:"taskNumber",children:e.number}),Object(s.jsx)("span",{className:d()(i&&"completedTask","taskTitle"),children:a})]}),Object(s.jsxs)("div",{className:"buttons",children:[Object(s.jsx)("button",{className:d()("button","red"),onClick:function(){e.deleteTask(n)},children:"Delete"}),Object(s.jsx)("button",{className:"button green",onClick:function(){b(!0)},children:"Edit"})]})]})})};var b=function(e){var t=e.addTask,n=e.isFetching,a=e.setMessage,i=Object(c.useState)(""),r=Object(u.a)(i,2),o=r[0],l=r[1];function j(){o.trim().length>0?(t(o),l("")):a({type:"Warning",title:"You can not add empty task to the list",isSet:!0})}return Object(s.jsxs)("div",{className:"newTask",children:[Object(s.jsx)("input",{className:"taskInput",type:"text",value:o,onChange:function(e){return l(e.currentTarget.value)},onKeyPress:function(e){13===e.charCode&&j()}}),Object(s.jsx)("button",{disabled:n,className:d()("button","green","addButton"),onClick:j,children:"Add task"})]})},p=n.p+"static/media/Preloader.1aaab899.gif",h=function(){return Object(s.jsx)("div",{className:"spinnerContainer",children:Object(s.jsx)("img",{src:p,alt:"preloader",className:"spinner"})})},f=n(60),k=n(59),m=n(11),O=n.n(m),x=n(27),g=n(17),v=n(12),y=n(26),S=n.n(y).a.create({baseURL:"https://taksks-list-default-rtdb.firebaseio.com/"}),C=function(){return S.get("tasks.json")},T=function(e){return S.delete("tasks/"+e+".json")},N=function(e,t){return S.patch("tasks.json",Object(v.a)({},e,t))},w=a.a.createContext({tasks:[],isFetching:!1,message:{type:null,title:"",isSet:!1},setMessage:function(e){},addTask:function(e){},deleteTask:function(e){},toggleCompleteness:function(e){}}),M=a.a.memo((function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(!1),l=Object(u.a)(r,2),d=l[0],j=l[1],b=Object(c.useState)({type:null,title:"",isSet:!1}),p=Object(u.a)(b,2),h=p[0],f=p[1];function k(){return(k=Object(g.a)(O.a.mark((function e(){var t,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],j(!0),e.prev=2,e.next=5,C().then((function(e){return e.data}));case 5:for(s in n=e.sent)t.push(Object(o.a)(Object(o.a)({},n[s]),{},{id:s}));i(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),v({type:"Error",title:"Couldn't fetch tasks",isSet:!0});case 14:j(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}Object(c.useEffect)((function(){!function(){k.apply(this,arguments)}()}),[]);var m=function(){var e=Object(g.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,T(t);case 4:e.sent,i((function(e){return e.filter((function(e){return e.id!==t}))})),v({type:"Success",title:"Task was deleted",isSet:!0}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Deleting error: "+e.t0),v({type:"Error",title:"Couldn't delete task",isSet:!0});case 13:j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){f(e),setTimeout((function(){f({type:null,title:"",isSet:!1})}),2e3)};return Object(s.jsx)(w.Provider,{value:{tasks:a,isFetching:d,changeCompleteness:function(e){j(!0),N(e.id,Object(o.a)(Object(o.a)({},e),{},{completed:!e.completed})).then((function(){i((function(t){return t.map((function(t){return t.id===e.id?Object(o.a)(Object(o.a)({},e),{},{completed:!e.completed}):t}))})),j(!1)})).catch((function(e){console.error(e),v({type:"Error",title:"Couldn't complete this task",isSet:!0}),j(!1)}))},addTask:function(e){j(!0),function(e){var t={title:e,date:new Date,completed:!1};return S.post("tasks.json",t).then((function(e){return Object(o.a)(Object(o.a)({},t),{},{id:e.data.name})}))}(e).then((function(e){i((function(t){return[].concat(Object(x.a)(t),[e])})),v({type:"Success",title:"Task was added to the list",isSet:!0}),j(!1)})).catch((function(e){console.error(e),v({type:"Error",title:"Couldn't add new task",isSet:!0}),j(!1)}))},deleteTask:m,editTask:function(e){j(!0),N(e.id,e).then((function(){i((function(t){return t.map((function(t){return t.id===e.id?e:t}))})),v({type:"Success",title:"Task was edited",isSet:!0}),j(!1)})).catch((function(e){console.error(e),v({type:"Error",title:"Couldn't edit the task",isSet:!0}),j(!1)}))},message:h,setMessage:v},children:e.children})})),E=function(e){var t=e.type,n=e.title,c=e.setMessage;return e.isSet?Object(s.jsx)(k.a,{timeout:500,classNames:"message",children:Object(s.jsxs)("div",{className:"message ".concat(t.toLowerCase(),"-message"),children:[Object(s.jsx)("h1",{children:"".concat(t,": ").concat(n)}),Object(s.jsx)("span",{onClick:function(){c({type:null,title:"",isSet:!1})},children:"\xd7"})]})}):null},F=function(){var e=Object(c.useContext)(w),t=e.message,n=e.setMessage,a=e.tasks,i=e.isFetching,r=e.addTask,o=e.editTask,u=e.deleteTask,l=e.changeCompleteness;return Object(s.jsxs)("div",{className:"taskList",children:[Object(s.jsx)("h1",{children:"My tasks list"}),Object(s.jsx)(b,{addTask:r,isFetching:i,setMessage:n}),i?Object(s.jsx)(h,{}):Object(s.jsx)(E,{type:t.type,title:t.title,setMessage:n,isSet:t.isSet}),Object(s.jsx)("ul",{children:Object(s.jsx)(f.a,{children:a.map((function(e,t){return Object(s.jsx)(k.a,{timeout:200,classNames:"taskItem",children:Object(s.jsx)(j,{setMessage:n,changeCompleteness:l,editTask:o,task:e,number:t+1,deleteTask:u})},e.id)}))})})]})};var D=function(){return Object(s.jsx)("div",{className:"appWrapper",children:Object(s.jsx)(M,{children:Object(s.jsx)(F,{})})})};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(D,{})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.a9419469.chunk.js.map